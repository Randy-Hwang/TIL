# 2022. 04. 24 Today I Learned

## Delete

이번에는 투두에서 삭제 기능을 추가할건데, 이미 추가한게 아니냐? 라고 물으신다면 반만 맞습니다.

- 우리가 이미 만들어낸 투두는 브라우저에서 우리가 클릭한 투두를 지워주지만, 로컬 스토리지에서는 지워주지 않습니다. 즉, 새로고침을 하면 우리가 지워도 다시 보여진다는 것이죠.

- 우리가 브라우저에서 클릭했을 때 클릭한 요소를 삭제하도록 만들어뒀으니, 그걸 로컬스토리지 삭제 함수에 그대로 갖다넣으면 되는거 아니냐? 라고 하기에는 약간의 문제가 있습니다.

- 우리가 브라우저에서 삭제 기능을 만들어 놓은 것은

  - 어떤 것을 클릭했을 때

  - 클릭한 요소의 부모 요소를 html에서 지우는

  - 방식입니다. 그러나 로컬스토리지에서는 투두가 요소로 구성되어 있는 것이 아니라, 문자열의 집합인 배열로 되어있습니다. 따라서 만약 똑같은 투두가 두 개 있다면, 단순히 문자열만으로는 어떤 투두를 지워야하는지 명확하지 않아서 문제가 생기게 됩니다.

- 따라서, 로컬스토리지에 투두를 추가할 때 각 투두마다 아이디를 하나씩 가질 수 있도록 하면 그 아이디를 사용해 로컬스토리지에서도 문제없이 삭제 기능을 구현할 수 있습니다.

```js
// 로컬스토리지에 추가할 투두.
// 삭제를 용이하게 하기위해 고유한 아이디가 필요.
const newToDoObj = {
  text: newToDo,
  id: Date.now(),
};

// 저장과 불러오기를 위해 투두를 배열에 추가
toDos.push(newToDoObj);
```

- 이렇게 만들면, 로컬스토리지에 투두로 추가한 내용과 아이디가 함께 저장됩니다.

- 다만 여기서 이렇게 만들고 끝은 아니고, 이 아이디를 사용을 해야합니다.

  - 삭제 버튼을 누르면, 브라우저에서 그 요소(span)의 부모요소(li)를 삭제를 하고, 그 요소의 아이디를 가져와 로컬스토리지에서도 삭제를 해야합니다.

  - 이 과정을 거치려면 html에도 아이디를 가져야 합니다. 즉, 내가 부여한 아이디가 비단 로컬스토리지에만 저장되는 것이 아니라 html에도 들어가야 한다는 것입니다.

  - 그렇게 되면 `paintToDO` 함수를 손봐야할 것 같습니다.

- 먼저 `filter` 라는것을 알아야합니다. 배열에서 사용할 수 있는 함수인데요,

  - 각 배열의 요소마다 필터 안에 넣은 함수를 실행시킵니다.

  - 필터 안에 넣은 함수는 항상 불리언 값을 리턴해야 합니다. true가 나오면 그 요소는 배열에서 유지시키는 것이고, false가 나오면 그 요소는 배열에서 제외되는 것입니다.

  - 이걸 통해 내가 삭제 버튼을 누른 요소의 id값을 받고, 그 id값을 필터에 넣어서 새로운 배열을 만들어내면 되겠죵?

  - 다만 기억하셔야 할 것은, 필터는 원래 있던 배열을 필터링하여 변경하지 않습니다. 필터링된 새로운 배열을 반환합니다.

```js
// 브라우저의 투두를 삭제하는 함수
function delTodo(event) {
  // 이벤트가 발생한 타겟의 부모에게 접근 -> 타겟의 부모는 span과 button을 가지고 있는 li.
  const deleteLi = event.target.parentElement;
  deleteLi.remove();
  toDos = toDos.filter((toDo) => toDo.id !== parseInt(deleteLi.id));
  saveToDo();
}
```

- 수정한 투두를 삭제하는 함수입니다.

  - 우선 삭제 버튼 클릭이라는 이벤트가 일어난 타켓의 부모요소에 접근합니다. 그리고 그 요소를 삭제를 하고,

  - 그 요소가 가지고있는 아이디를 가지고 필터를 사용하여 투두 배열에서 삭제시킵니다.

  - 필터는 원래 배열을 바꾸지 않고 새로운 배열을 만들어낸다고 했죠, 그래서 `toDos`에 한번 더 넣어주고 `saveToDo`를 활용하여 로컬스토리지에 업데이트시켜줍니다. 그러면 완성!

- 뭔가 걱정되는건, 이 강의의 제목들을 한번 스윽 훑어보면 CSS를 다루는 칸이 없습니다.

- 헉.. 혹시 CSS를 나 혼자서 다뤄야하나? 벌써부터 답답한데요.

- 그래도 뭐.. CSS를 다 까먹기 직전이었으니 이렇게라도 한번 부딪혀보면서 복습해보는게 낫겠다는 생각을 하기도 합니다.

- 정말 부딪혀야 하나요,,, 그냥 니꼬가 가르쳐주는걸 집중해서 듣는것도 도움될텐데...ㅜ
