# 2022. 05. 03 Today I Learned

## express 사용하기

js파일에서 익스프레스를 어떻게 사용하는걸까요?

```js
const express = require("express");
```

이렇게만 적으면 익스프레스를 사용할 수 있다고 합니다. 다만 저는 아직 익스프레스를 사용한다는 개념을 이해하기가 힘드네요. 익스프레스는 서버 개발을 위해 사용하는 프로그램이다 보니, 이걸 단순히 코드 몇 줄로 서버를 만들 수 있다는 개념이 아직 머리속에는 잘 잡히지 않습니다.

---

여기서 니꼬가 `babel` 이라는것에 대해 알려줍니다. 바벨이란 무엇일까요?

- 바벨이란 자바스크립트 컴파일러입니다.

  - node.js는 기본적으로 거의 모든 자바스크립트 파일을 이해할겁니다. 이해하겠지만, 최근의 자바스크립트 파일은 node.js가 이해하지 못합니다.

  - 따라서 바벨은 node.js가 문제없이 자바스크립트 파일을 읽을 수 있도록 컴파일해주는 역할을 수행합니다.

- 따라서 바벨을 다운로드 받아야합니다.

`npm install --save-dev @babel/core`

이렇게 명령어를 쳐서 바벨을 다운로드받고 package.json 파일을 열어보면, devDependencies 폴더 안에 들어가있습니다.

- 굳이 앞에 dev를 붙이냐 마냐의 차이는, 개발자의 편의를 위한 것이라고 합니다. 말 그대로 개발자의 편의를 위한 dependencies.

- 앞에 dev가 붙어있지 않은 dependencies는 우리가 개발하는 프로젝트가 작동하는데에 필요한 dependencies.

- 우리가 쳤던 명령어에서 `--save-dev`라는 명령어가 그 역할을 합니다. devDependencies로 옮겨주는 것.

- 그리고 babel.config.json 이라는 파일을 만들어서 안에 코드 몇 줄을 적어주어야 합니다.

`npm install @babel/preset-env --save-dev` 라는 명령어 또한 작성합니다. preset-env 라는게 글자 자체에서도 아실 수 있다시피 프리셋인데요, 자바스크립트 최신 문법을 사용해도 node.js가 이해할 수 있도록 도와주는 프리셋이라고 합니다.

- 바벨 사이트에는 자바스크립트 코드를 바벨의 코드 안에 집어넣으면 완성이라고 하는데, 모든 코드에 이걸 다 적용하기는 귀찮습니다.

- 따라서 우린 이걸 package.json 파일에 적어보려고 합니다. script를 이용하는건데요. 저번 시간에 배웠던 것 처럼 script에 특정 명령어를 우리가 만들어놓는다면 우리가 직접 사용 가능한 명령어를 만들어낼 수 있습니다.

---

- 여기에 추가적으로 nodemon 이라는 것 또한 추가합니다. nodemon은 우리가 만든 파일이 수정되는 것을 감시하는 패키지입니다. 우리가 파일을 수정할 때 마다 파일을 저장하고, 바벨을 계속 돌리지 않아도 된다는 소리입니다.

- 여기까지 하면 기본적인 세팅은 다 끝났습니다. 이제 코드를 작성하고 저장 버튼을 누르면 알아서 최신 코드들은 node.js가 알아들을 수 있도록 설정했습니다. 이제 코드를 짜기만 하면됩니다!

---

src라는 폴더를 새로 만들었습니다. 이 폴더는, 코드와 로직을 가지고 있는 모든 파일들을 포함합니다. 아무래도 package.json, babel과 같은 파일들과 코드를 분리하기 위해서 작성한 것이겠죠.

---

> express server 만들기

우선 js파일에 express를 import 해줍니다.

```js
// app이 아닌 다른 이름으로 만들어도 상관없으나,
const app = express();
```

이렇게 익스프레스 함수를 사용하면, 익스프레스 어플리케이션을 만들어냅니다.

- 짜잔! 서버 만들기 성공! 이라고 하기엔 너무 빈약하죠. 여기서 서버라는 것이 무엇일까요? 서버에 대해서 한번 알아봅시다.

  - 서버는 항상 켜져있는 컴퓨터라고 생각하면 됩니다. 항상 인터넷에 연결되어있다고 할 수 있습니다.

  - 그리고 항상 request를 listening 해야합니다. 여기서 들어야 하는 request는 무엇인가?

    - 만약 우리가 google.com을 검색창에 검색한다고 해봅시다. 그렇게 되면 google.com에 요청을 보낸겁니다. 카카오톡에서 메세지를 보내는 것도 서버에게 보내는 요청이라고 할 수 있습니다.

    - 서버와 상호작용하는 모든 일들을 서버는 듣고 있습니다. listen!

    - `app.listen(4000, handleListener)` 라고 작성합니다. listen()함수는 콜백함수를 인자로 받는데, 4000은 포트를 뜻하는 숫자이고, handleListener는 이제부터 우리가 적어나가야 할 함수에 해당합니다.
